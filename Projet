<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <title>LinkAnalitics</title>
    </head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="">LinkAnalitics</a>
    </nav>
    <br>
    <br>
    <div class="px-5" >
        <div class="card">
            <div class="card-body">
                <p>Générer des graphiques relatif aux partages sur vos sites !</p>
                <form id="formulaire" onclick="genererGraphiques()">
                    <input type="text" id="siteWeb" placeholder="Site web" required>
                    <br>
                    <span id="ajoutChamp"></span>
                    <br>
                    <a onclick="ajouterChamp()">Ajouter un champ de saisie</a>
                    <br><br>
                    <a onclick="supprimerDernierChamp()" id="lienSupprimerChamp" hidden>Supprimer le dernier champ de saisie</a>
                    <br><br>
                    <input type="submit" value="Générer">
                </form>
            </div>
        </div>
        <br><br>
        <div class="card text-center" id="resultats" hidden>
            <div class="card-title">Résultats :</div>
            <div class="card-body">
                <p id="contenu"></p>
                <img src="" id="graph1">
            </div>
        </div>
    </div>
    <script>
        var tabDataTest = [27,25,60,31,25,39,25,31,26,28,80,28,27,31,27,29,26,35,70,25];

        function genererGraphiques(){
            document.getElementById('resultats').removeAttribute("hidden");
            requetteGraphique('lc', 700, 500, tabDataTest, '');
        }

        function requetteGraphique(type, width, height, data, labels){
            url = 'https://image-charts.com/chart?chan&cht=' + type + '&chs=' + width + 'x' + height + '&chd=t:' + data.join() + '&chl=' + labels;
            document.getElementById("graph1").setAttribute('src', url);
        }

        function ajouterChamp(){
            document.getElementById('lienSupprimerChamp').removeAttribute("hidden");

            var newInput = document.createElement("input");
            newInput.required = true;
            newInput.setAttribute('type',"text");
            newInput.setAttribute('placeholder',"Site web");

            document.getElementById('ajoutChamp').appendChild(document.createElement("BR"));
            document.getElementById('ajoutChamp').appendChild(newInput);
            document.getElementById('ajoutChamp').appendChild(document.createElement("BR"));
        }

        function supprimerDernierChamp(){
            for(let i = 0; i < 3; i++){
                document.getElementById('ajoutChamp').removeChild(document.getElementById('ajoutChamp').lastChild);
            }            
        }
    </script>
</body>
</html>
